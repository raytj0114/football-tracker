---
name: verification
description: 実装後の検証ループを実行。すべての実装タスク完了時に自動適用。
triggers:
  - 実装完了
  - verify
  - check
  - test
  - 確認
allowed-tools: Read, Bash, Grep, mcp__playwright, mcp__fetch
version: 1.0
---

# 検証ループ（Verification Loop）

## 目的

**「実装→検証→修正」のループを回し、品質を2〜3倍向上させる。**

## 検証フロー（必須）

### Step 1: 静的解析

```bash
npm run type-check
npm run lint
```

- エラーがあれば修正し、再実行
- 警告も可能な限り解消

### Step 2: ビルド確認

```bash
npm run build
```

- ビルドエラーがあれば修正
- Step 1から再実行

### Step 3: テスト

```bash
npm run test
```

- 失敗するテストがあれば修正
- 新機能にはテスト追加を検討

### Step 4: 動作確認

```bash
npm run dev
```

#### ブラウザ検証（Playwright）

1. 該当URLにアクセス
2. 確認項目:
   - コンソールエラーなし
   - 意図した表示
   - インタラクション動作
   - レスポンシブ対応

#### API検証（fetch MCP）

1. エンドポイントにリクエスト
2. 確認項目:
   - 正常系レスポンス
   - 異常系エラーハンドリング
   - ステータスコード

### Step 5: 問題があれば修正

- 根本原因を特定（推測で修正しない）
- 修正後、Step 1から再実行
- 同じエラーが繰り返される場合、アプローチを見直す

## 検証結果の報告形式

```
## 検証レポート

### 静的解析
- type-check: ✓ パス / ✗ エラーN件
- lint: ✓ パス / ✗ エラーN件

### ビルド
- build: ✓ 成功 / ✗ 失敗（原因）

### テスト
- test: ✓ パス / ✗ 失敗N件

### 動作確認
- URL: 確認したURL
- コンソール: ✓ エラーなし / ✗ エラーあり
- 表示: ✓ 正常 / ✗ 問題あり
- 動作: ✓ 正常 / ✗ 問題あり

### 総合判定
✓ すべてパス - 完了
✗ 要修正 - 修正後再検証
```

## 禁止事項

- 検証せずに「完了」と報告
- エラーを無視または握りつぶす
- 「たぶん動く」で終わらせる
- 推測で修正する
